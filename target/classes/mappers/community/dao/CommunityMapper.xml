<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.water.Mulbburi.community.dao.CommunityMapper">
	<resultMap id="selectcommunity" type="com.water.Mulbburi.community.dto.CommunityDTO">
		<id property="communityNo" column="COMMUNITY_NO"/>
		<result property="communityTitle" column="COMMUNITY_TITLE"/>
		<result property="communityStory" column="COMMUNITY_STORY"/>
		<result property="communityWriteDate" column="COMMUNITY_WRITE_DATE"/>
		<result property="communityUpdateDate" column="COMMUNITY_UPDATE_DATE"/>
		<result property="communityDeleteDate" column="COMMUNITY_DELETE_DATE"/>
		<result property="memberNo" column="MEMBER_NO"/>
		<result property="custom" column="CUSTOM"/>

	</resultMap>
	
	  <select id="selectTotalCount" resultMap="selectcommunity" parameterType="hashmap">
        SELECT 
        	   COUNT(*)
          FROM COMMUNITY A
          
          
          <where>
           <if test="searchCondition == 'title'">
                A.COMMUNITY_TITLE LIKE '%' || #{ searchValue } || '%'
            </if>
            <if test="searchCondition == 'content'">
                A.COMMUNITY_STORY LIKE '%' || #{ searchValue } || '%'
            </if>
            AND A.CUSTOM = '1'
            </where>
	 </select>
	
	
	<select id="selectBoardLIST" resultType="selectcommunity">
		
			  SELECT 
	           A.COMMUNITY_NO
	         , A.COMMUNITY_TITLE
	         , A.COMMUNITY_STORY
	         , A.MEMBER_NO
	         , A.COMMUNITY_COUNT
	         , A._DATE
	         , A.BOARD_STATUS
          FROM (SELECT 
                       ROWNUM RNUM
                     , B.BOARD_NO
                     , B.BOARD_TYPE
			         , B.CATEGORY_CODE
			         , B.BOARD_TITLE
			         , B.BOARD_BODY
			         , B.BOARD_WRITER_MEMBER_NO
			         , B.BOARD_COUNT
			         , B.CREATED_DATE
			         , B.BOARD_STATUS
                  FROM (SELECT 
                               C.BOARD_NO
					         , C.BOARD_TYPE
					         , C.CATEGORY_CODE
					         , C.BOARD_TITLE
					         , C.BOARD_BODY
					         , C.BOARD_WRITER_MEMBER_NO
					         , C.BOARD_COUNT
					         , C.CREATED_DATE
					         , C.BOARD_STATUS
                          FROM TBL_BOARD C
	
	
	
	
	</select>
        
</mapper>